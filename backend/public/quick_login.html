<!DOCTYPE html>
<html>
<head>
    <title>Quick Login Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #1a1a1a; color: white; }
        button { padding: 10px 20px; margin: 10px; background: #4CAF50; color: white; border: none; border-radius: 5px; cursor: pointer; }
        #results { margin-top: 20px; padding: 20px; background: #2a2a2a; border-radius: 5px; white-space: pre-wrap; }
    </style>
</head>
<body>
    <h1>Quick Login Test</h1>
    <p>Test different accounts:</p>
    
    <button onclick="testAccount('master@zh-love.com', 'password')">ZH Master</button>
    <button onclick="testAccount('admin@zh-love.com', 'password')">Admin</button>
    <button onclick="testAccount('pro@zh-love.com', 'password')">Pro Gamer</button>
    
    <br><br>
    
    <button onclick="testClanAPI()">Test Clan API</button>
    <button onclick="goToMyClan()">Go to My Clan</button>
    <button onclick="clearStorage()">Clear Storage</button>
    
    <div id="results"></div>

    <script>
        async function testAccount(email, password) {
            const results = document.getElementById('results');
            results.textContent = `Testing ${email}...\n`;
            
            try {
                const response = await fetch('http://localhost:8080/api/auth/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ email, password })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    localStorage.setItem('authToken', data.token);
                    results.textContent += `‚úÖ Login successful!\n`;
                    results.textContent += `Token: ${data.token.substring(0, 50)}...\n`;
                    results.textContent += `User: ${data.user.username}\n`;
                } else {
                    results.textContent += `‚ùå Login failed: ${data.error}\n`;
                }
            } catch (error) {
                results.textContent += `üí• Error: ${error.message}\n`;
            }
        }

        async function testClanAPI() {
            const token = localStorage.getItem('authToken');
            const results = document.getElementById('results');
            
            if (!token) {
                results.textContent = 'No token found. Please login first.';
                return;
            }
            
            results.textContent = 'Testing Clan API...\n';
            
            try {
                const response = await fetch('http://localhost:8080/clan_api.php?action=user_clan', {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });
                
                const data = await response.json();
                results.textContent += 'Clan API Response:\n';
                results.textContent += JSON.stringify(data, null, 2);
            } catch (error) {
                results.textContent += `üí• Error: ${error.message}\n`;
            }
        }

        function goToMyClan() {
            window.location.href = 'http://localhost:4321/ar/my-clan';
        }

        function clearStorage() {
            localStorage.clear();
            document.getElementById('results').textContent = 'Storage cleared.';
        }

        // Check current token status
        window.onload = function() {
            const token = localStorage.getItem('authToken');
            const results = document.getElementById('results');
            if (token) {
                results.textContent = `Current token: ${token.substring(0, 50)}...\n`;
            } else {
                results.textContent = 'No token stored.\n';
            }
        }
    </script>
</body>
</html>

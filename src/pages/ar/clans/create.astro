---
import BaseLayout from '../../../layouts/BaseLayout.astro';
import { Shield, Plus, ArrowLeft, Crown, Users, Trophy, Star, AlertCircle } from 'lucide-react';

const title = "ุฅูุดุงุก ุนุดูุฑุฉ ุฌุฏูุฏุฉ - ุฒุฏ ุงุชุด ููู";
const description = "ุฃูุดุฆ ุนุดูุฑุชู ุงูุฎุงุตุฉ ูุงุฌูุน ุฃูุถู ุงููุงุนุจูู ูู ุงูุฌูุฑุงูุงุช ุฒูุฑู ุขูุฑ";
---

<BaseLayout title={title} description={description}>
  <div class="container-custom py-8">
    <!-- Navigation -->
    <div class="mb-6">
      <nav class="flex items-center space-x-2 rtl:space-x-reverse text-sm text-muted-foreground">
        <a href="/ar" class="hover:text-foreground transition-colors">ุงูุฑุฆูุณูุฉ</a>
        <span>/</span>
        <a href="/ar/clans" class="hover:text-foreground transition-colors">ุงูุนุดุงุฆุฑ</a>
        <span>/</span>
        <span class="text-foreground">ุฅูุดุงุก ุนุดูุฑุฉ</span>
      </nav>
    </div>

    <!-- Back Button -->
    <div class="mb-6">
      <a 
        href="/ar/clans" 
        class="inline-flex items-center space-x-2 rtl:space-x-reverse text-muted-foreground hover:text-foreground transition-colors"
      >
        <ArrowLeft size={20} class="rtl:rotate-180" />
        <span>ุงูุนูุฏุฉ ููุนุดุงุฆุฑ</span>
      </a>
    </div>

    <!-- Header -->
    <div class="text-center mb-8">
      <h1 class="text-3xl font-bold text-foreground mb-2 flex items-center justify-center space-x-3 rtl:space-x-reverse">
        <Shield size={32} class="text-tactical-green" />
        <span>ุฅูุดุงุก ุนุดูุฑุฉ ุฌุฏูุฏุฉ</span>
      </h1>
      <p class="text-muted-foreground max-w-2xl mx-auto">
        ุฃูุดุฆ ุนุดูุฑุชู ุงูุฎุงุตุฉ ูุงุฌูุน ุฃูุถู ุงููุงุนุจูู. ูู ุจุชุฎุตูุต ุนุดูุฑุชู ูุถุน ุงูููุงููู ูุงููุชุทูุจุงุช ุงูุชู ุชูุงุณุจ ุฃุณููุจ ูุนุจู.
      </p>
    </div>

    <!-- Requirements -->
    <div class="military-card p-6 mb-8">
      <h2 class="text-xl font-bold text-foreground mb-4 flex items-center space-x-2 rtl:space-x-reverse">
        <AlertCircle size={20} class="text-tactical-green" />
        <span>ูุชุทูุจุงุช ุฅูุดุงุก ุงูุนุดูุฑุฉ</span>
      </h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="space-y-3">
          <div class="flex items-center space-x-2 rtl:space-x-reverse">
            <div class="w-2 h-2 bg-tactical-green rounded-full"></div>
            <span class="text-foreground">ูุณุชูู 20 ุนูู ุงูุฃูู ูู ุงููุนุจุฉ</span>
          </div>
          <div class="flex items-center space-x-2 rtl:space-x-reverse">
            <div class="w-2 h-2 bg-tactical-green rounded-full"></div>
            <span class="text-foreground">ุญุณุงุจ ููุนู ูู ุงููุฌุชูุน ููุฏุฉ ุดูุฑ</span>
          </div>
          <div class="flex items-center space-x-2 rtl:space-x-reverse">
            <div class="w-2 h-2 bg-tactical-green rounded-full"></div>
            <span class="text-foreground">ุนุฏู ูุฌูุฏ ูุฎุงููุงุช ุณุงุจูุฉ</span>
          </div>
        </div>
        <div class="space-y-3">
          <div class="flex items-center space-x-2 rtl:space-x-reverse">
            <div class="w-2 h-2 bg-tactical-green rounded-full"></div>
            <span class="text-foreground">ุฑุณูู ุงูุฅูุดุงุก: 10,000 ููุทุฉ ุฐูุจ</span>
          </div>
          <div class="flex items-center space-x-2 rtl:space-x-reverse">
            <div class="w-2 h-2 bg-tactical-green rounded-full"></div>
            <span class="text-foreground">ููุงููุฉ ุงูุฅุฏุงุฑุฉ ูุทููุจุฉ</span>
          </div>
          <div class="flex items-center space-x-2 rtl:space-x-reverse">
            <div class="w-2 h-2 bg-tactical-green rounded-full"></div>
            <span class="text-foreground">ุงูุงูุชุฒุงู ุจููุงููู ุงููุฌุชูุน</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Creation Cost -->
    <div class="military-card p-6 mb-8 text-center">
      <div class="flex items-center justify-center space-x-4 rtl:space-x-reverse">
        <div class="text-2xl">๐ฐ</div>
        <div>
          <div class="text-xl font-bold text-foreground">ุชูููุฉ ุฅูุดุงุก ุงูุนุดูุฑุฉ: 10,000 ููุทุฉ ุฐูุจ</div>
          <div class="text-sm text-muted-foreground" id="currentGold">ุฑุตูุฏู ุงูุญุงูู: 25,000 ููุทุฉ ุฐูุจ</div>
        </div>
      </div>
    </div>

    <!-- Form -->
    <div class="max-w-4xl mx-auto">
      <form id="clanCreationForm" class="space-y-8">
        <!-- Basic Information -->
        <div class="military-card p-6">
          <h2 class="text-xl font-bold text-foreground mb-6 flex items-center space-x-2 rtl:space-x-reverse">
            <Shield size={20} />
            <span>ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ</span>
          </h2>
          
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <label class="block text-sm font-medium text-foreground mb-2">
                ุงุณู ุงูุนุดูุฑุฉ *
              </label>
              <input 
                type="text" 
                name="clanName"
                placeholder="ุฃุฏุฎู ุงุณู ุงูุนุดูุฑุฉ"
                class="w-full px-3 py-2 bg-input border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-ring"
                maxlength="30"
                required
              />
              <p class="text-xs text-muted-foreground mt-1">ุญุฏ ุฃูุตู 30 ุญุฑู</p>
            </div>
            
            <div>
              <label class="block text-sm font-medium text-foreground mb-2">
                ุฑูุฒ ุงูุนุดูุฑุฉ *
              </label>
              <input 
                type="text" 
                name="clanTag"
                placeholder="ูุซุงู: ARAB"
                class="w-full px-3 py-2 bg-input border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-ring uppercase"
                maxlength="6"
                pattern="[A-Z0-9]+"
                required
              />
              <p class="text-xs text-muted-foreground mt-1">2-6 ุฃุญุฑู ุฅูุฌููุฒูุฉ ุฃู ุฃุฑูุงู</p>
            </div>
          </div>
          
          <div class="mt-6">
            <label class="block text-sm font-medium text-foreground mb-2">
              ูุตู ุงูุนุดูุฑุฉ *
            </label>
            <textarea 
              name="description"
              placeholder="ุฃุฏุฎู ูุตู ุงูุนุดูุฑุฉ ูุฃูุฏุงููุง..."
              class="w-full px-3 py-2 bg-input border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-ring resize-none"
              rows="4"
              maxlength="200"
              required
            ></textarea>
            <p class="text-xs text-muted-foreground mt-1">ุญุฏ ุฃูุตู 200 ุญุฑู</p>
          </div>
        </div>

        <!-- Organizer Information -->
        <div class="military-card p-6">
          <h2 class="text-xl font-bold text-foreground mb-6 flex items-center space-x-2 rtl:space-x-reverse">
            <Crown size={20} />
            <span>ูุนูููุงุช ุงูููุธู</span>
          </h2>
          
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <label class="block text-sm font-medium text-foreground mb-2">
                ุงูุงุณู ุงููุงูู *
              </label>
              <input 
                type="text" 
                name="organizerName"
                placeholder="ุฃุฏุฎู ุงุณูู ุงููุงูู"
                class="w-full px-3 py-2 bg-input border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-ring"
                required
              />
            </div>
            
            <div>
              <label class="block text-sm font-medium text-foreground mb-2">
                ุงูุจุฑูุฏ ุงูุฅููุชุฑููู *
              </label>
              <input 
                type="email" 
                name="organizerEmail"
                placeholder="email@example.com"
                class="w-full px-3 py-2 bg-input border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-ring"
                required
              />
            </div>
            
            <div>
              <label class="block text-sm font-medium text-foreground mb-2">
                ุฑูู ุงููุงุชู
              </label>
              <input 
                type="tel" 
                name="organizerPhone"
                placeholder="+966 50 123 4567"
                class="w-full px-3 py-2 bg-input border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-ring"
              />
            </div>
            
            <div>
              <label class="block text-sm font-medium text-foreground mb-2">
                ุงูุจูุฏ *
              </label>
              <select name="organizerCountry" class="w-full px-3 py-2 bg-input border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-ring" required>
                <option value="">ุงุฎุชุฑ ุงูุจูุฏ</option>
                <option value="saudi">ุงูุณุนูุฏูุฉ</option>
                <option value="egypt">ูุตุฑ</option>
                <option value="uae">ุงูุฅูุงุฑุงุช</option>
                <option value="kuwait">ุงููููุช</option>
                <option value="qatar">ูุทุฑ</option>
                <option value="bahrain">ุงูุจุญุฑูู</option>
                <option value="oman">ุนูุงู</option>
                <option value="jordan">ุงูุฃุฑุฏู</option>
                <option value="lebanon">ูุจูุงู</option>
                <option value="syria">ุณูุฑูุง</option>
                <option value="iraq">ุงูุนุฑุงู</option>
                <option value="morocco">ุงููุบุฑุจ</option>
                <option value="tunisia">ุชููุณ</option>
                <option value="algeria">ุงูุฌุฒุงุฆุฑ</option>
                <option value="other">ุฏููุฉ ุฃุฎุฑู</option>
              </select>
            </div>
            
            <div class="md:col-span-2">
              <label class="block text-sm font-medium text-foreground mb-2">
                ุฎุจุฑุชู ูู ุงููุนุจุฉ *
              </label>
              <select name="organizerExperience" class="w-full px-3 py-2 bg-input border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-ring" required>
                <option value="">ุงุฎุชุฑ ูุณุชูู ุงูุฎุจุฑุฉ</option>
                <option value="beginner">ูุจุชุฏุฆ (ุฃูู ูู ุณูุฉ)</option>
                <option value="intermediate">ูุชูุณุท (1-3 ุณููุงุช)</option>
                <option value="advanced">ูุชูุฏู (3-5 ุณููุงุช)</option>
                <option value="expert">ุฎุจูุฑ (ุฃูุซุฑ ูู 5 ุณููุงุช)</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Customization -->
        <div class="military-card p-6">
          <h2 class="text-xl font-bold text-foreground mb-6 flex items-center space-x-2 rtl:space-x-reverse">
            <Star size={20} />
            <span>ุงูุชุฎุตูุต ูุงููุธูุฑ</span>
          </h2>
          
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <label class="block text-sm font-medium text-foreground mb-2">
                ุงูููุทูุฉ ุงูุฌุบุฑุงููุฉ *
              </label>
              <select name="region" class="w-full px-3 py-2 bg-input border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-ring" required>
                <option value="">ุงุฎุชุฑ ุงูููุทูุฉ</option>
                <option value="middle-east">ุงูุดุฑู ุงูุฃูุณุท</option>
                <option value="gulf">ุงูุฎููุฌ ุงูุนุฑุจู</option>
                <option value="levant">ุจูุงุฏ ุงูุดุงู</option>
                <option value="north-africa">ุดูุงู ุฃูุฑูููุง</option>
                <option value="international">ุฏูููุฉ</option>
              </select>
            </div>
            
            <div>
              <label class="block text-sm font-medium text-foreground mb-2">
                ุงููุบุฉ ุงูุฃุณุงุณูุฉ *
              </label>
              <select name="language" class="w-full px-3 py-2 bg-input border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-ring" required>
                <option value="ar">ุงูุนุฑุจูุฉ</option>
                <option value="en">ุงูุฅูุฌููุฒูุฉ</option>
                <option value="fr">ุงููุฑูุณูุฉ</option>
                <option value="mixed">ูุชุนุฏุฏุฉ ุงููุบุงุช</option>
              </select>
            </div>
          </div>
          
          <div class="mt-6">
            <label class="block text-sm font-medium text-foreground mb-2">
              ุฃููููุฉ ุงูุนุดูุฑุฉ
            </label>
            <div class="grid grid-cols-6 md:grid-cols-8 gap-3">
              {['๐ฆ', '๐ฐ', 'โ๏ธ', '๐ก๏ธ', '๐', '๐', '๐ฅ', 'โก', '๐', '๐', '๐', '๐ฏ', '๐ฆ', '๐บ', '๐ฆ', '๐ป'].map((icon) => (
                <button 
                  type="button"
                  class="w-12 h-12 text-2xl border-2 border-border rounded-lg hover:border-primary hover:bg-primary/10 transition-colors flex items-center justify-center clan-icon"
                  data-icon={icon}
                >
                  {icon}
                </button>
              ))}
            </div>
            <input type="hidden" name="clanIcon" />
          </div>
        </div>

        <!-- Membership Settings -->
        <div class="military-card p-6">
          <h2 class="text-xl font-bold text-foreground mb-6 flex items-center space-x-2 rtl:space-x-reverse">
            <Users size={20} />
            <span>ุฅุนุฏุงุฏุงุช ุงูุนุถููุฉ</span>
          </h2>
          
          <div class="space-y-6">
            <div>
              <label class="block text-sm font-medium text-foreground mb-2">
                ููุน ุงูุนุถููุฉ *
              </label>
              <div class="space-y-3">
                <label class="flex items-center space-x-3 rtl:space-x-reverse">
                  <input type="radio" name="membershipType" value="public" class="text-primary" />
                  <div>
                    <div class="font-medium text-foreground">ููุชูุญุฉ ููุฌููุน</div>
                    <div class="text-sm text-muted-foreground">ูููู ูุฃู ูุงุนุจ ุงูุงูุถูุงู ูุจุงุดุฑุฉ</div>
                  </div>
                </label>
                <label class="flex items-center space-x-3 rtl:space-x-reverse">
                  <input type="radio" name="membershipType" value="invite-only" class="text-primary" />
                  <div>
                    <div class="font-medium text-foreground">ุจุฏุนูุฉ ููุท</div>
                    <div class="text-sm text-muted-foreground">ูููู ูููุงุฏุฉ ูุงูุถุจุงุท ุฏุนูุฉ ุฃุนุถุงุก ุฌุฏุฏ</div>
                  </div>
                </label>
                <label class="flex items-center space-x-3 rtl:space-x-reverse">
                  <input type="radio" name="membershipType" value="application" class="text-primary" checked />
                  <div>
                    <div class="font-medium text-foreground">ุชุชุทูุจ ุทูุจ ุงูุถูุงู</div>
                    <div class="text-sm text-muted-foreground">ูุฌุจ ุนูู ุงููุงุนุจูู ุชูุฏูู ุทูุจ ููุงูุถูุงู</div>
                  </div>
                </label>
              </div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
              <div>
                <label class="block text-sm font-medium text-foreground mb-2">
                  ุงูุญุฏ ุงูุฃุฏูู ูููุณุชูู *
                </label>
                <input 
                  type="number" 
                  name="minLevel"
                  min="1" 
                  max="100" 
                  value="1"
                  class="w-full px-3 py-2 bg-input border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-ring"
                  required
                />
              </div>
              
              <div>
                <label class="block text-sm font-medium text-foreground mb-2">
                  ูุนุฏู ุงูููุฒ ุงููุทููุจ (%) *
                </label>
                <input 
                  type="number" 
                  name="minWinRate"
                  min="0" 
                  max="100" 
                  value="50"
                  class="w-full px-3 py-2 bg-input border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-ring"
                  required
                />
              </div>
              
              <div>
                <label class="block text-sm font-medium text-foreground mb-2">
                  ุงูุญุฏ ุงูุฃูุตู ููุฃุนุถุงุก *
                </label>
                <select name="maxMembers" class="w-full px-3 py-2 bg-input border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-ring" required>
                  <option value="25">25 ุนุถู</option>
                  <option value="30">30 ุนุถู</option>
                  <option value="40">40 ุนุถู</option>
                  <option value="50" selected>50 ุนุถู</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <!-- Rules and Guidelines -->
        <div class="military-card p-6">
          <h2 class="text-xl font-bold text-foreground mb-6 flex items-center space-x-2 rtl:space-x-reverse">
            <AlertCircle size={20} />
            <span>ุงูููุงููู ูุงูุชูุฌููุงุช</span>
          </h2>
          
          <div class="space-y-4">
            <div>
              <label class="block text-sm font-medium text-foreground mb-2">
                ููุงููู ุงูุนุดูุฑุฉ
              </label>
              <textarea 
                name="rules"
                placeholder="ุงูุชุจ ููุงููู ุงูุนุดูุฑุฉ ููุง..."
                class="w-full px-3 py-2 bg-input border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-ring resize-none"
                rows="6"
                maxlength="500"
              ></textarea>
              <p class="text-xs text-muted-foreground mt-1">ุญุฏ ุฃูุตู 500 ุญุฑู</p>
            </div>
            
            <div>
              <label class="block text-sm font-medium text-foreground mb-2">
                ูุชุทูุจุงุช ุงููุดุงุฑูุฉ
              </label>
              <div class="space-y-2">
                <label class="flex items-center space-x-3 rtl:space-x-reverse">
                  <input type="checkbox" name="participationRequirements" value="clan-wars" class="text-primary" />
                  <span>ุงููุดุงุฑูุฉ ูู ุญุฑูุจ ุงูุนุดูุฑุฉ ุฅุฌุจุงุฑูุฉ</span>
                </label>
                <label class="flex items-center space-x-3 rtl:space-x-reverse">
                  <input type="checkbox" name="participationRequirements" value="daily-activity" class="text-primary" />
                  <span>ุงููุดุงุท ุงููููู ูุทููุจ</span>
                </label>
                <label class="flex items-center space-x-3 rtl:space-x-reverse">
                  <input type="checkbox" name="participationRequirements" value="chat-participation" class="text-primary" />
                  <span>ุงููุดุงุฑูุฉ ูู ุงูุฏุฑุฏุดุฉ ูุทููุจุฉ</span>
                </label>
                <label class="flex items-center space-x-3 rtl:space-x-reverse">
                  <input type="checkbox" name="participationRequirements" value="arabic-only" class="text-primary" />
                  <span>ุงููุนุจ ุจุงููุบุฉ ุงูุนุฑุจูุฉ ููุท</span>
                </label>
              </div>
            </div>
          </div>
        </div>

        <!-- Terms and Conditions -->
        <div class="military-card p-6">
          <h2 class="text-xl font-bold text-foreground mb-6">ุงูููุงููุงุช ูุงูุดุฑูุท</h2>
          
          <div class="space-y-4">
            <label class="flex items-start space-x-3 rtl:space-x-reverse">
              <input type="checkbox" name="termsAccept" class="text-primary mt-1" required />
              <span class="text-sm text-foreground">
                ุฃูุงูู ุนูู <a href="/ar/terms" class="text-primary hover:underline">ุดุฑูุท ุงูุงุณุชุฎุฏุงู</a> ู
                <a href="/ar/privacy" class="text-primary hover:underline">ุณูุงุณุฉ ุงูุฎุตูุตูุฉ</a>
              </span>
            </label>
            
            <label class="flex items-start space-x-3 rtl:space-x-reverse">
              <input type="checkbox" name="communityRules" class="text-primary mt-1" required />
              <span class="text-sm text-foreground">
                ุฃูุงูู ุนูู ุงูุงูุชุฒุงู ุจููุงููู ุงููุฌุชูุน ููุนุงููุฑ ุงูุนุดุงุฆุฑ
              </span>
            </label>
            
            <label class="flex items-start space-x-3 rtl:space-x-reverse">
              <input type="checkbox" name="leaderResponsibility" class="text-primary mt-1" required />
              <span class="text-sm text-foreground">
                ุฃุชุญูู ุงููุณุคูููุฉ ุงููุงููุฉ ุนู ุฅุฏุงุฑุฉ ุงูุนุดูุฑุฉ ูุณููู ุฃุนุถุงุฆูุง
              </span>
            </label>
            
            <label class="flex items-start space-x-3 rtl:space-x-reverse">
              <input type="checkbox" name="costAccept" class="text-primary mt-1" required />
              <span class="text-sm text-foreground">
                ุฃูุงูู ุนูู ุฏูุน ุฑุณูู ุงูุฅูุดุงุก 10,000 ููุทุฉ ุฐูุจ (ุบูุฑ ูุงุจูุฉ ููุงุณุชุฑุฏุงุฏ)
              </span>
            </label>
          </div>
        </div>

        <!-- Summary -->
        <div class="military-card p-6">
          <h2 class="text-xl font-bold text-foreground mb-6">ููุฎุต ุงูุนุดูุฑุฉ</h2>
          <div class="bg-muted rounded-lg p-4 mb-6" id="clanSummary">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
              <div>
                <div class="font-medium text-foreground">ุงูุงุณู: <span class="text-muted-foreground" id="summaryName">ุงุณู ุงูุนุดูุฑุฉ</span></div>
                <div class="font-medium text-foreground">ุงูุฑูุฒ: <span class="text-muted-foreground" id="summaryTag">[TAG]</span></div>
                <div class="font-medium text-foreground">ุงูููุน: <span class="text-muted-foreground" id="summaryType">ุชุชุทูุจ ุทูุจ ุงูุถูุงู</span></div>
              </div>
              <div>
                <div class="font-medium text-foreground">ุงูููุทูุฉ: <span class="text-muted-foreground" id="summaryRegion">ุบูุฑ ูุญุฏุฏ</span></div>
                <div class="font-medium text-foreground">ุงูุญุฏ ุงูุฃุฏูู: <span class="text-muted-foreground" id="summaryMinLevel">Level 1</span></div>
                <div class="font-medium text-foreground">ูุนุฏู ุงูููุฒ: <span class="text-muted-foreground" id="summaryWinRate">50%+</span></div>
              </div>
            </div>
          </div>
          
          <div class="text-center">
            <button type="submit" class="btn btn-primary btn-lg">
              ุชูุฏูู ุทูุจ ุฅูุดุงุก ุงูุนุดูุฑุฉ
            </button>
            <p class="text-sm text-muted-foreground mt-2">
              ุณูุชู ูุฑุงุฌุนุฉ ุทูุจู ูู ูุจู ุงูุฅุฏุงุฑุฉ ุฎูุงู 3-5 ุฃูุงู ุนูู
            </p>
          </div>
        </div>
      </form>
    </div>
  </div>
</BaseLayout>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('clanCreationForm');
    let selectedIcon = '';
    
    // Icon selection
    document.querySelectorAll('.clan-icon').forEach(button => {
      button.addEventListener('click', function() {
        // Remove selection from all icons
        document.querySelectorAll('.clan-icon').forEach(btn => {
          btn.classList.remove('border-primary', 'bg-primary/10');
          btn.classList.add('border-border');
        });
        
        // Select this icon
        this.classList.remove('border-border');
        this.classList.add('border-primary', 'bg-primary/10');
        
        selectedIcon = this.dataset.icon;
        document.querySelector('input[name="clanIcon"]').value = selectedIcon;
      });
    });
    
    // Update summary in real-time
    const nameInput = document.querySelector('input[name="clanName"]');
    const tagInput = document.querySelector('input[name="clanTag"]');
    const membershipTypeInputs = document.querySelectorAll('input[name="membershipType"]');
    const regionSelect = document.querySelector('select[name="region"]');
    const minLevelInput = document.querySelector('input[name="minLevel"]');
    const minWinRateInput = document.querySelector('input[name="minWinRate"]');
    
    function updateSummary() {
      document.getElementById('summaryName').textContent = nameInput.value || 'ุงุณู ุงูุนุดูุฑุฉ';
      document.getElementById('summaryTag').textContent = `[${tagInput.value || 'TAG'}]`;
      
      const selectedMembershipType = document.querySelector('input[name="membershipType"]:checked');
      if (selectedMembershipType) {
        const typeText = {
          'public': 'ููุชูุญุฉ ููุฌููุน',
          'invite-only': 'ุจุฏุนูุฉ ููุท',
          'application': 'ุชุชุทูุจ ุทูุจ ุงูุถูุงู'
        };
        document.getElementById('summaryType').textContent = typeText[selectedMembershipType.value];
      }
      
      const regionText = {
        'middle-east': 'ุงูุดุฑู ุงูุฃูุณุท',
        'gulf': 'ุงูุฎููุฌ ุงูุนุฑุจู',
        'levant': 'ุจูุงุฏ ุงูุดุงู',
        'north-africa': 'ุดูุงู ุฃูุฑูููุง',
        'international': 'ุฏูููุฉ'
      };
      document.getElementById('summaryRegion').textContent = regionText[regionSelect.value] || 'ุบูุฑ ูุญุฏุฏ';
      document.getElementById('summaryMinLevel').textContent = `Level ${minLevelInput.value}`;
      document.getElementById('summaryWinRate').textContent = `${minWinRateInput.value}%+`;
    }
    
    [nameInput, tagInput, regionSelect, minLevelInput, minWinRateInput].forEach(input => {
      input.addEventListener('input', updateSummary);
      input.addEventListener('change', updateSummary);
    });
    
    membershipTypeInputs.forEach(input => {
      input.addEventListener('change', updateSummary);
    });
    
    // Update tag input to uppercase
    tagInput.addEventListener('input', function() {
      this.value = this.value.toUpperCase();
    });
    
    // Form submission
    form.addEventListener('submit', async function(e) {
      e.preventDefault();
      
      const token = localStorage.getItem('zh_love_token');
      if (!token) {
        alert('ูุฌุจ ุชุณุฌูู ุงูุฏุฎูู ุฃููุงู');
        window.location.href = '/ar/login';
        return;
      }

      // Prepare data for submission
      const data = {
        clanName: nameInput.value,
        clanTag: tagInput.value,
        description: document.querySelector('textarea[name="description"]').value,
        organizerName: document.querySelector('input[name="organizerName"]').value,
        organizerEmail: document.querySelector('input[name="organizerEmail"]').value,
        organizerPhone: document.querySelector('input[name="organizerPhone"]').value,
        organizerCountry: document.querySelector('select[name="organizerCountry"]').value,
        organizerExperience: document.querySelector('select[name="organizerExperience"]').value,
        region: regionSelect.value,
        language: document.querySelector('select[name="language"]').value,
        clanIcon: selectedIcon,
        membershipType: document.querySelector('input[name="membershipType"]:checked').value,
        minLevel: minLevelInput.value,
        minWinRate: minWinRateInput.value,
        maxMembers: document.querySelector('select[name="maxMembers"]').value,
        rules: document.querySelector('textarea[name="rules"]').value,
        participationRequirements: Array.from(document.querySelectorAll('input[name="participationRequirements"]:checked')).map(cb => cb.value),
        termsAccept: document.querySelector('input[name="termsAccept"]').checked,
        communityRules: document.querySelector('input[name="communityRules"]').checked,
        leaderResponsibility: document.querySelector('input[name="leaderResponsibility"]').checked,
        costAccept: document.querySelector('input[name="costAccept"]').checked,
      };

      // Submit to API directly
      try {
        const response = await fetch('http://localhost:8080/quick_clan_fix.php?action=create', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${token}`
          },
          body: JSON.stringify(data)
        });

        const result = await response.json();
        
        if (result.success) {
          alert('ุชู ุชูุฏูู ุทูุจ ุฅูุดุงุก ุงูุนุดูุฑุฉ ุจูุฌุงุญ! ุณูุชู ูุฑุงุฌุนุชู ูู ูุจู ุงูุฅุฏุงุฑุฉ.');
          window.location.href = '/ar/clans';
        } else {
          alert(result.error || 'ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุชูุฏูู ุงูุทูุจ');
        }
      } catch (error) {
        alert('ุญุฏุซ ุฎุทุฃ ูู ุงูุงุชุตุงู ุจุงูุฎุงุฏู');
      }
    });
    
    // Load user's current gold
    const currentGold = parseInt(localStorage.getItem('userGold') || '25000');
    document.getElementById('currentGold').textContent = `ุฑุตูุฏู ุงูุญุงูู: ${currentGold.toLocaleString()} ููุทุฉ ุฐูุจ`;
  });
</script> 
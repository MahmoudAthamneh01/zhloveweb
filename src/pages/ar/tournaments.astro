---
import BaseLayout from '../../layouts/BaseLayout.astro';
import TournamentFilters from '../../components/tournaments/TournamentFilters';
import AdvancedTournamentModal from '../../components/tournaments/AdvancedTournamentModal';
import EnhancedTournamentCard from '../../components/tournaments/EnhancedTournamentCard';
---

<BaseLayout 
  title="Ø§Ù„Ø¨Ø·ÙˆÙ„Ø§Øª - ZH-Love"
  description="Ø§Ù„Ø¨Ø·ÙˆÙ„Ø§Øª ÙˆØ§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø§Øª ÙÙŠ Ù…Ø¬ØªÙ…Ø¹ ZH-Love Ù„Ø¬Ù†Ø±Ø§Ù„Ø² Ø²ÙŠØ±Ùˆ Ø¢ÙˆØ±"
>
  <div class="min-h-screen bg-background">
    <!-- Hero Section -->
    <div class="relative bg-gradient-to-r from-gray-900 via-green-900 to-gray-900 py-20 overflow-hidden">
      <div class="absolute inset-0 bg-black opacity-50"></div>
      
      <!-- Animated Background -->
      <div class="absolute inset-0">
        <div class="absolute top-1/4 left-1/4 w-64 h-64 bg-green-600 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob"></div>
        <div class="absolute top-1/3 right-1/4 w-64 h-64 bg-yellow-600 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-2000"></div>
        <div class="absolute bottom-1/4 left-1/3 w-64 h-64 bg-purple-600 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-4000"></div>
      </div>
      
      <div class="relative container mx-auto px-4">
        <div class="text-center">
          <div class="animate-fade-in-up">
            <h1 class="text-5xl font-bold text-white mb-6">
              <span class="bg-gradient-to-r from-green-400 via-yellow-400 to-green-400 bg-clip-text text-transparent">
                ğŸ† Ø§Ù„Ø¨Ø·ÙˆÙ„Ø§Øª ÙˆØ§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø§Øª
              </span>
            </h1>
            <p class="text-xl text-gray-300 mb-8 max-w-2xl mx-auto">
              Ø´Ø§Ø±Ùƒ ÙÙŠ Ø§Ù„Ø¨Ø·ÙˆÙ„Ø§Øª Ø§Ù„Ù…Ø«ÙŠØ±Ø© ÙˆØ§Ø«Ø¨Øª Ù…Ù‡Ø§Ø±Ø§ØªÙƒ ÙÙŠ Ø¬Ù†Ø±Ø§Ù„Ø² Ø²ÙŠØ±Ùˆ Ø¢ÙˆØ±
            </p>
          </div>
          
          <!-- Create Tournament Hero Button -->
          <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
            <button 
              id="create-tournament-btn"
              class="px-8 py-3 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white rounded-lg font-medium transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl flex items-center space-x-2 rtl:space-x-reverse"
            >
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clip-rule="evenodd"></path>
              </svg>
              <span>Ø¥Ù†Ø´Ø§Ø¡ Ø¨Ø·ÙˆÙ„Ø© Ù…ØªÙ‚Ø¯Ù…Ø©</span>
            </button>
            <div class="text-center">
              <a href="#active-tournaments" class="px-8 py-3 bg-transparent border-2 border-green-600 text-green-600 hover:bg-green-600 hover:text-white rounded-lg font-medium transition-colors">
                ØªØµÙØ­ Ø§Ù„Ø¨Ø·ÙˆÙ„Ø§Øª
              </a>
              <div class="mt-2 flex items-center justify-center text-sm text-gray-400">
                <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                </svg>
                <span>ØªØ±Ø¬Ù…Ø© Ø¢Ù„ÙŠØ© â€¢ Ø£Ù†Ø¸Ù…Ø© Ø¯ÙØ¹ Ù…ØªÙ‚Ø¯Ù…Ø© â€¢ ØªÙˆØ²ÙŠØ¹ Ø¬ÙˆØ§Ø¦Ø² Ø°ÙƒÙŠ</span>
              </div>
            </div>
          </div>
          
          <!-- Stats -->
          <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mt-12 animate-fade-in-up" style="animation-delay: 0.3s;">
            <div class="bg-black bg-opacity-30 backdrop-blur-sm rounded-lg p-6 border border-green-500/20 hover:border-green-500/40 transition-all duration-300 transform hover:scale-105">
              <div class="text-3xl font-bold text-green-400" id="active-tournaments">--</div>
              <div class="text-gray-300">Ø¨Ø·ÙˆÙ„Ø§Øª Ù†Ø´Ø·Ø©</div>
            </div>
            <div class="bg-black bg-opacity-30 backdrop-blur-sm rounded-lg p-6 border border-blue-500/20 hover:border-blue-500/40 transition-all duration-300 transform hover:scale-105">
              <div class="text-3xl font-bold text-blue-400" id="total-participants">--</div>
              <div class="text-gray-300">Ù…Ø´Ø§Ø±ÙƒÙŠÙ†</div>
            </div>
            <div class="bg-black bg-opacity-30 backdrop-blur-sm rounded-lg p-6 border border-yellow-500/20 hover:border-yellow-500/40 transition-all duration-300 transform hover:scale-105">
              <div class="text-3xl font-bold text-yellow-400" id="total-prizes">--</div>
              <div class="text-gray-300">Ø¬ÙˆØ§Ø¦Ø² USD</div>
            </div>
            <div class="bg-black bg-opacity-30 backdrop-blur-sm rounded-lg p-6 border border-purple-500/20 hover:border-purple-500/40 transition-all duration-300 transform hover:scale-105">
              <div class="text-3xl font-bold text-purple-400" id="completed-tournaments">--</div>
              <div class="text-gray-300">Ø¨Ø·ÙˆÙ„Ø§Øª Ù…Ù†ØªÙ‡ÙŠØ©</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container mx-auto px-4 py-12">
      <!-- Featured Tournaments Section -->
      <div id="featured-section" class="mb-16 hidden">
        <div class="text-center mb-12">
          <h2 class="text-4xl font-bold text-white mb-4 flex items-center justify-center space-x-3 rtl:space-x-reverse">
            <span class="text-yellow-400">ğŸ‘‘</span>
            <span class="bg-gradient-to-r from-yellow-400 to-purple-400 bg-clip-text text-transparent">
              Ø§Ù„Ø¨Ø·ÙˆÙ„Ø§Øª Ø§Ù„Ù…Ù…ÙŠØ²Ø©
            </span>
            <span class="text-yellow-400">ğŸ‘‘</span>
          </h2>
          <p class="text-gray-400 max-w-2xl mx-auto">
            Ø§Ù„Ø¨Ø·ÙˆÙ„Ø§Øª Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© Ø®ØµÙŠØµØ§Ù‹ Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ù„Ù„Ù…Ø´Ø§Ø±ÙƒØ© ÙÙŠ Ø£ÙƒØ«Ø± Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø¥Ø«Ø§Ø±Ø©
          </p>
        </div>
        
        <div id="featured-tournaments" class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-8">
          <!-- Featured tournaments will be loaded here -->
        </div>
      </div>

      <!-- Action Bar -->
      <div class="flex flex-col md:flex-row justify-between items-center mb-8 animate-fade-in-up" style="animation-delay: 0.6s;">
        <div class="flex items-center space-x-4 rtl:space-x-reverse mb-4 md:mb-0">
          <h2 class="text-2xl font-bold text-white">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨Ø·ÙˆÙ„Ø§Øª</h2>
          <span id="tournament-count" class="px-3 py-1 bg-green-600 text-white text-sm rounded-full animate-pulse">0</span>
        </div>
        
        <div class="flex items-center space-x-4 rtl:space-x-reverse">
          <!-- Live Tournaments Button -->
          <button 
            id="live-tournaments-btn"
            class="group px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white rounded-lg transition-all duration-300 flex items-center space-x-2 rtl:space-x-reverse transform hover:scale-105 shadow-lg hover:shadow-red-500/25"
          >
            <div class="w-3 h-3 bg-white rounded-full animate-pulse group-hover:animate-ping"></div>
            <span>Ù…Ø¨Ø§Ø´Ø± Ø§Ù„Ø¢Ù†</span>
            <span id="live-count" class="px-2 py-1 bg-white text-red-600 text-xs rounded-full font-bold group-hover:animate-bounce">0</span>
          </button>
          
          <!-- My Tournaments Button -->
          <button 
            id="my-tournaments-btn"
            class="px-6 py-3 bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white rounded-lg transition-all duration-300 flex items-center space-x-2 rtl:space-x-reverse transform hover:scale-105 shadow-lg hover:shadow-purple-500/25"
          >
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
            </svg>
            <span>Ø¨Ø·ÙˆÙ„Ø§ØªÙŠ</span>
          </button>
        </div>
      </div>

      <!-- Filters -->
      <div class="animate-fade-in-up" style="animation-delay: 0.9s;">
        <TournamentFilters client:load />
      </div>

      <!-- Tournaments Grid -->
      <div class="animate-fade-in-up" style="animation-delay: 1.2s;">
        <div id="tournaments-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mt-8">
          <!-- Loading State -->
          <div class="col-span-full flex items-center justify-center py-20">
            <div class="text-center">
              <div class="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mb-4"></div>
              <p class="text-gray-400">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨Ø·ÙˆÙ„Ø§Øª...</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Load More Button -->
      <div id="load-more-container" class="text-center mt-12 hidden">
        <button 
          id="load-more-btn"
          class="px-8 py-3 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-lg transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-blue-500/25"
        >
          ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø²ÙŠØ¯
        </button>
      </div>

      <!-- Tournament Categories -->
      <div class="mt-20 animate-fade-in-up" style="animation-delay: 1.8s;">
        <h2 class="text-3xl font-bold text-white mb-8 text-center">Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø¨Ø·ÙˆÙ„Ø§Øª</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
          <div class="category-card group bg-gradient-to-br from-blue-600 to-blue-800 rounded-lg p-6 text-center cursor-pointer transform hover:scale-105 transition-all duration-300 hover:shadow-lg hover:shadow-blue-500/25 relative overflow-hidden" data-category="1v1">
            <div class="relative z-10">
              <div class="text-4xl mb-3 group-hover:animate-bounce">âš”ï¸</div>
              <h3 class="text-xl font-bold text-white mb-2">Ø¨Ø·ÙˆÙ„Ø§Øª 1v1</h3>
              <p class="text-blue-200">Ù…Ø¨Ø§Ø±ÙŠØ§Øª ÙØ±Ø¯ÙŠØ© Ù…Ø«ÙŠØ±Ø©</p>
            </div>
            <div class="absolute inset-0 bg-white opacity-0 group-hover:opacity-10 transition-opacity duration-300"></div>
          </div>
          
          <div class="category-card group bg-gradient-to-br from-green-600 to-green-800 rounded-lg p-6 text-center cursor-pointer transform hover:scale-105 transition-all duration-300 hover:shadow-lg hover:shadow-green-500/25 relative overflow-hidden" data-category="team">
            <div class="relative z-10">
              <div class="text-4xl mb-3 group-hover:animate-bounce">ğŸ‘¥</div>
              <h3 class="text-xl font-bold text-white mb-2">Ø¨Ø·ÙˆÙ„Ø§Øª Ø§Ù„ÙØ±Ù‚</h3>
              <p class="text-green-200">ØªØ¹Ø§ÙˆÙ† ÙˆØ§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ©</p>
            </div>
            <div class="absolute inset-0 bg-white opacity-0 group-hover:opacity-10 transition-opacity duration-300"></div>
          </div>
          
          <div class="category-card group bg-gradient-to-br from-purple-600 to-purple-800 rounded-lg p-6 text-center cursor-pointer transform hover:scale-105 transition-all duration-300 hover:shadow-lg hover:shadow-purple-500/25 relative overflow-hidden" data-category="clan">
            <div class="relative z-10">
              <div class="text-4xl mb-3 group-hover:animate-bounce">ğŸ›¡ï¸</div>
              <h3 class="text-xl font-bold text-white mb-2">Ø­Ø±ÙˆØ¨ Ø§Ù„Ø¹Ø´Ø§Ø¦Ø±</h3>
              <p class="text-purple-200">Ù…Ø¹Ø§Ø±Ùƒ Ø¬Ù…Ø§Ø¹ÙŠØ© Ù…Ù„Ø­Ù…ÙŠØ©</p>
            </div>
            <div class="absolute inset-0 bg-white opacity-0 group-hover:opacity-10 transition-opacity duration-300"></div>
          </div>
          
          <div class="category-card group bg-gradient-to-br from-yellow-600 to-yellow-800 rounded-lg p-6 text-center cursor-pointer transform hover:scale-105 transition-all duration-300 hover:shadow-lg hover:shadow-yellow-500/25 relative overflow-hidden" data-category="special">
            <div class="relative z-10">
              <div class="text-4xl mb-3 group-hover:animate-bounce">ğŸ†</div>
              <h3 class="text-xl font-bold text-white mb-2">Ø¨Ø·ÙˆÙ„Ø§Øª Ø®Ø§ØµØ©</h3>
              <p class="text-yellow-200">Ø£Ø­Ø¯Ø§Ø« Ù…ÙˆØ³Ù…ÙŠØ© Ù…Ù…ÙŠØ²Ø©</p>
            </div>
            <div class="absolute inset-0 bg-white opacity-0 group-hover:opacity-10 transition-opacity duration-300"></div>
          </div>
        </div>
      </div>

      <!-- Quick Stats -->
      <div class="mt-20 animate-fade-in-up" style="animation-delay: 2.1s;">
        <h2 class="text-3xl font-bold text-white mb-8 text-center">Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø³Ø±ÙŠØ¹Ø©</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
          <div class="bg-card border border-border rounded-lg p-6 text-center hover:border-green-500/50 transition-colors">
            <div class="w-16 h-16 bg-green-600/20 rounded-full flex items-center justify-center mx-auto mb-4">
              <svg class="w-8 h-8 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"></path>
              </svg>
            </div>
            <h3 class="text-xl font-bold text-white mb-2">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¬ÙˆØ§Ø¦Ø²</h3>
            <p class="text-3xl font-bold text-green-400" id="total-prize-pool">$0</p>
            <p class="text-gray-400 text-sm mt-2">ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨Ø·ÙˆÙ„Ø§Øª</p>
          </div>
          
          <div class="bg-card border border-border rounded-lg p-6 text-center hover:border-blue-500/50 transition-colors">
            <div class="w-16 h-16 bg-blue-600/20 rounded-full flex items-center justify-center mx-auto mb-4">
              <svg class="w-8 h-8 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
              </svg>
            </div>
            <h3 class="text-xl font-bold text-white mb-2">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ†</h3>
            <p class="text-3xl font-bold text-blue-400" id="total-all-participants">0</p>
            <p class="text-gray-400 text-sm mt-2">Ø¹Ø¨Ø± Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨Ø·ÙˆÙ„Ø§Øª</p>
          </div>
          
          <div class="bg-card border border-border rounded-lg p-6 text-center hover:border-purple-500/50 transition-colors">
            <div class="w-16 h-16 bg-purple-600/20 rounded-full flex items-center justify-center mx-auto mb-4">
              <svg class="w-8 h-8 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"></path>
              </svg>
            </div>
            <h3 class="text-xl font-bold text-white mb-2">Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù†Ø¬Ø§Ø­</h3>
            <p class="text-3xl font-bold text-purple-400" id="completion-rate">0%</p>
            <p class="text-gray-400 text-sm mt-2">Ø§Ù„Ø¨Ø·ÙˆÙ„Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Advanced Tournament Modal -->
  <AdvancedTournamentModal client:load />

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      let currentPage = 1;
      let hasMorePages = true;
      let currentFilter = 'all';
      let allTournaments = [];
      let featuredTournaments = [];
      let isLoading = false;

      // Initialize page
      loadStats();
      loadFeaturedTournaments();
      loadTournaments();
      setupEventListeners();

      async function loadStats() {
        try {
          // Mock data for development
          const stats = {
            active: 6,
            participants: 289,
            prizes: 10200,
            completed: 2,
            live: 2,
            totalPrizePool: 10200,
            totalParticipants: 289,
            completionRate: 33
          };
          
          document.getElementById('active-tournaments').textContent = stats.active || 0;
          document.getElementById('total-participants').textContent = stats.participants || 0;
          document.getElementById('total-prizes').textContent = '$' + (stats.prizes || 0);
          document.getElementById('completed-tournaments').textContent = stats.completed || 0;
          document.getElementById('live-count').textContent = stats.live || 0;
          
          // Extended stats
          document.getElementById('total-prize-pool').textContent = '$' + (stats.totalPrizePool || 0);
          document.getElementById('total-all-participants').textContent = stats.totalParticipants || 0;
          document.getElementById('completion-rate').textContent = (stats.completionRate || 0) + '%';
        } catch (error) {
          console.error('Error loading stats:', error);
        }
      }

      async function loadFeaturedTournaments() {
        // Mock featured tournaments for development
        const mockTournaments = [
          {
            id: 1,
            name: 'Ø¨Ø·ÙˆÙ„Ø© Ø§Ù„Ø¬Ù†Ø±Ø§Ù„Ø§Øª Ø§Ù„ÙƒØ¨Ø±Ù‰ 2024',
            description: 'Ø§Ù„Ø¨Ø·ÙˆÙ„Ø© Ø§Ù„Ø£ÙƒØ¨Ø± ÙˆØ§Ù„Ø£Ù‡Ù… ÙÙŠ Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ Ø§Ù„Ø¹Ø±Ø¨ÙŠ Ù„Ø¬Ù†Ø±Ø§Ù„Ø² Ø²ÙŠØ±Ùˆ Ø³Ø§Ø¹Ø©',
            status: 'open',
            participants: 89,
            maxParticipants: 128,
            prizePool: 2500,
            startDate: '2024-03-15T18:00:00',
            image: '/images/tournaments/grand-championship-2024.jpg'
          },
          {
            id: 2,
            name: 'ØªØ­Ø¯ÙŠ Ø§Ù„ÙƒÙ„Ø§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ',
            description: 'Ù…Ø³Ø§Ø¨Ù‚Ø© Ø£Ø³Ø¨ÙˆØ¹ÙŠØ© Ø¨ÙŠÙ† Ø£Ù‚ÙˆÙ‰ Ø§Ù„ÙƒÙ„Ø§Ù†Ø§Øª Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©',
            status: 'live',
            participants: 16,
            maxParticipants: 20,
            prizePool: 500,
            startDate: '2024-03-08T19:00:00',
            image: '/images/tournaments/weekly-clan-battle.jpg'
          }
        ];
        
        featuredTournaments = mockTournaments;
        if (featuredTournaments.length > 0) {
          displayFeaturedTournaments();
          document.getElementById('featured-section').classList.remove('hidden');
        }
      }

      async function loadTournaments(page = 1, filter = 'all', append = false) {
        if (isLoading) return;
        
        isLoading = true;
        try {
          // Mock tournaments for development
          const mockTournaments = [
            {
              id: 3,
              name: 'ÙƒØ£Ø³ Ø§Ù„Ø´Ø±Ù‚ Ø§Ù„Ø£ÙˆØ³Ø·',
              description: 'Ø¨Ø·ÙˆÙ„Ø© Ø¥Ù‚Ù„ÙŠÙ…ÙŠØ© Ù…Ù…ÙŠØ²Ø© Ø¬Ù…Ø¹Øª Ø£ÙØ¶Ù„ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†',
              status: 'completed',
              participants: 64,
              maxParticipants: 64,
              prizePool: 1200,
              startDate: '2024-02-15T20:00:00'
            },
            {
              id: 4,
              name: 'Ø¨Ø·ÙˆÙ„Ø© Ø§Ù„Ø£Ø³Ø§Ø·ÙŠØ±',
              description: 'Ø¨Ø·ÙˆÙ„Ø© Ø­ØµØ±ÙŠØ© Ù„Ø£ÙØ¶Ù„ 32 Ù„Ø§Ø¹Ø¨ ÙÙŠ Ø§Ù„Ù…Ø¬ØªÙ…Ø¹',
              status: 'live',
              participants: 32,
              maxParticipants: 32,
              prizePool: 5000,
              startDate: '2024-03-01T20:00:00'
            }
          ];
          
          if (append) {
            allTournaments = [...allTournaments, ...mockTournaments];
          } else {
            allTournaments = mockTournaments;
          }
          
          hasMorePages = false;
          currentPage = page;
          
          displayTournaments(allTournaments);
          updateLoadMoreButton();
          updateTournamentCount(allTournaments.length);
        } catch (error) {
          console.error('Error loading tournaments:', error);
          displayEmptyState();
        } finally {
          isLoading = false;
        }
      }

      function displayFeaturedTournaments() {
        const container = document.getElementById('featured-tournaments');
        container.innerHTML = featuredTournaments.map((tournament, index) => `
          <div style="animation: fade-in-up 0.6s ease-out ${index * 0.2}s forwards; opacity: 0;">
            ${renderTournamentCard(tournament, true)}
          </div>
        `).join('');
      }

      function displayTournaments(tournaments) {
        const container = document.getElementById('tournaments-container');
        
        if (tournaments.length === 0) {
          displayEmptyState();
          return;
        }

        container.innerHTML = tournaments.map((tournament, index) => `
          <div style="animation: fade-in-up 0.6s ease-out ${index * 0.1}s forwards; opacity: 0;">
            ${renderTournamentCard(tournament)}
          </div>
        `).join('');
      }

      function renderTournamentCard(tournament, isFeatured = false) {
        return `
          <div class="enhanced-tournament-card ${isFeatured ? 'featured' : ''}" data-tournament-id="${tournament.id}">
            ${renderCardContent(tournament, isFeatured)}
          </div>
        `;
      }

      function renderCardContent(tournament, isFeatured) {
        const statusColor = getStatusColor(tournament.status);
        const statusText = getStatusText(tournament.status);
        
        return `
          <div class="group relative">
            ${isFeatured ? `
              <div class="absolute -inset-1 bg-gradient-to-r from-yellow-600 via-yellow-400 to-yellow-600 rounded-lg blur opacity-25 group-hover:opacity-40 transition duration-300 animate-pulse"></div>
            ` : ''}
            
            <div class="relative bg-card border rounded-lg overflow-hidden transition-all duration-300 transform hover:-translate-y-2 hover:shadow-xl ${
              isFeatured 
                ? 'border-yellow-500/50 hover:shadow-yellow-500/20' 
                : 'border-border hover:shadow-green-500/10'
            }">
              
              <!-- Tournament Image/Header -->
              <div class="relative h-48 bg-gradient-to-r from-gray-800 to-gray-900 overflow-hidden">
                ${tournament.image ? `
                  <img src="${tournament.image}" alt="${tournament.name}" class="w-full h-full object-cover">
                ` : `
                  <div class="w-full h-full flex items-center justify-center bg-gradient-to-br ${
                    isFeatured 
                      ? 'from-yellow-600 to-yellow-800' 
                      : 'from-green-600 to-green-800'
                  }">
                    <div class="text-center">
                      <div class="text-4xl mb-2">
                        ${isFeatured ? 'ğŸ‘‘' : 'ğŸ†'}
                      </div>
                      <div class="text-white font-bold text-lg">${tournament.name}</div>
                    </div>
                  </div>
                `}
                
                <!-- Overlay Elements -->
                <div class="absolute inset-0 bg-black bg-opacity-20">
                  ${isFeatured ? `
                    <div class="absolute top-4 left-4 flex items-center space-x-1 rtl:space-x-reverse bg-yellow-600 px-3 py-1 rounded-full">
                      <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path>
                      </svg>
                      <span class="text-white text-xs font-bold">Ù…Ù…ÙŠØ²Ø©</span>
                    </div>
                  ` : ''}
                  
                  <!-- Status Badge -->
                  <div class="absolute top-4 right-4">
                    <span class="px-3 py-1 text-xs font-bold rounded-full ${statusColor}">
                      ${statusText}
                    </span>
                  </div>
                  
                  <!-- Prize Pool -->
                  ${tournament.prizePool > 0 ? `
                    <div class="absolute bottom-4 left-4 bg-black bg-opacity-60 backdrop-blur-sm px-3 py-1 rounded-full">
                      <div class="flex items-center space-x-1 rtl:space-x-reverse">
                        <svg class="w-4 h-4 text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"></path>
                        </svg>
                        <span class="text-yellow-400 font-bold text-sm">$${tournament.prizePool}</span>
                      </div>
                    </div>
                  ` : ''}
                </div>
              </div>
              
              <!-- Tournament Info -->
              <div class="p-6">
                <h3 class="text-xl font-bold text-white mb-2 line-clamp-2 group-hover:text-green-400 transition-colors">
                  ${tournament.name}
                </h3>
                <p class="text-gray-400 text-sm line-clamp-2 mb-4">${tournament.description}</p>
                
                <!-- Tournament Details -->
                <div class="grid grid-cols-2 gap-4 mb-4 text-sm">
                  <div class="flex items-center space-x-2 rtl:space-x-reverse">
                    <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"></path>
                    </svg>
                    <span class="text-gray-300">${tournament.participants}/${tournament.maxParticipants}</span>
                  </div>
                  <div class="flex items-center space-x-2 rtl:space-x-reverse">
                    <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                    </svg>
                    <span class="text-gray-300">${formatDate(tournament.startDate)}</span>
                  </div>
                </div>
                
                <!-- Action Buttons -->
                <div class="flex space-x-3 rtl:space-x-reverse">
                  <button 
                    onclick="viewTournament(${tournament.id})"
                    class="flex-1 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors text-sm font-medium"
                  >
                    Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„
                  </button>
                  ${tournament.status === 'open' ? `
                    <button 
                      onclick="joinTournament(${tournament.id})"
                      class="flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors text-sm font-medium"
                    >
                      Ø§Ù†Ø¶Ù…Ø§Ù…
                    </button>
                  ` : tournament.status === 'live' ? `
                    <button 
                      onclick="watchLive(${tournament.id})"
                      class="flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors text-sm font-medium"
                    >
                      Ù…Ø´Ø§Ù‡Ø¯Ø© Ù…Ø¨Ø§Ø´Ø±Ø©
                    </button>
                  ` : ''}
                </div>
              </div>

              ${isFeatured ? `
                <div class="absolute inset-0 pointer-events-none">
                  <div class="absolute top-0 left-0 w-full h-full bg-gradient-to-r from-transparent via-yellow-400/10 to-transparent transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-1000"></div>
                </div>
              ` : ''}
            </div>
          </div>
        `;
      }

      function displayEmptyState() {
        const container = document.getElementById('tournaments-container');
        container.innerHTML = `
          <div class="col-span-full text-center py-20">
            <div class="animate-bounce mb-4">
              <svg class="w-20 h-20 text-gray-400 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"></path>
              </svg>
            </div>
            <h3 class="text-xl font-semibold text-white mb-2">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨Ø·ÙˆÙ„Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹</h3>
            <p class="text-gray-400 mb-6">ÙƒÙ† Ø£ÙˆÙ„ Ù…Ù† ÙŠÙ†Ø´Ø¦ Ø¨Ø·ÙˆÙ„Ø© Ø¬Ø¯ÙŠØ¯Ø©!</p>
            <button onclick="document.getElementById('create-tournament-btn').click()" class="px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors">
              Ø¥Ù†Ø´Ø§Ø¡ Ø¨Ø·ÙˆÙ„Ø© Ø¬Ø¯ÙŠØ¯Ø©
            </button>
          </div>
        `;
      }

      function updateTournamentCount(count) {
        document.getElementById('tournament-count').textContent = count;
      }

      function updateLoadMoreButton() {
        const container = document.getElementById('load-more-container');
        const button = document.getElementById('load-more-btn');
        
        if (hasMorePages && allTournaments.length > 0) {
          container.classList.remove('hidden');
          button.disabled = isLoading;
          button.textContent = isLoading ? 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...' : 'ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø²ÙŠØ¯';
        } else {
          container.classList.add('hidden');
        }
      }

      function setupEventListeners() {
        // Create tournament button
        document.getElementById('create-tournament-btn')?.addEventListener('click', function() {
          // Check if user is logged in
          const user = JSON.parse(localStorage.getItem('zh_love_user') || '{}');
          if (!user.id) {
            alert('ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹ Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø¨Ø·ÙˆÙ„Ø©');
            window.location.href = '/ar/login';
            return;
          }
          
          // Trigger the advanced modal
          window.dispatchEvent(new CustomEvent('openAdvancedTournamentModal'));
        });

        // Live tournaments button
        document.getElementById('live-tournaments-btn')?.addEventListener('click', function() {
          currentFilter = 'live';
          loadTournaments(1, 'live');
        });

        // My tournaments button
        document.getElementById('my-tournaments-btn')?.addEventListener('click', function() {
          const token = localStorage.getItem('zh_love_token');
          if (!token) {
            window.location.href = '/ar/login';
            return;
          }
          window.location.href = '/ar/my-tournaments';
        });

        // Load more button
        document.getElementById('load-more-btn')?.addEventListener('click', function() {
          if (hasMorePages && !isLoading) {
            loadTournaments(currentPage + 1, currentFilter, true);
          }
        });

        // Category cards
        document.querySelectorAll('.category-card').forEach(card => {
          card.addEventListener('click', function() {
            const category = this.dataset.category;
            currentFilter = category;
            loadTournaments(1, category);
          });
        });

        // Filter events
        window.addEventListener('tournamentFilterChanged', function(e) {
          currentFilter = e.detail.filter || 'all';
          loadTournaments(1, currentFilter);
        });
      }

      // Helper functions
      function getStatusColor(status) {
        switch (status) {
          case 'open': return 'bg-green-600 text-white';
          case 'live': return 'bg-red-600 text-white animate-pulse';
          case 'completed': return 'bg-gray-600 text-white';
          case 'upcoming': return 'bg-blue-600 text-white';
          case 'cancelled': return 'bg-red-800 text-white';
          default: return 'bg-gray-600 text-white';
        }
      }

      function getStatusText(status) {
        switch (status) {
          case 'open': return 'Ù…ÙØªÙˆØ­ Ù„Ù„ØªØ³Ø¬ÙŠÙ„';
          case 'live': return 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¢Ù†';
          case 'completed': return 'Ù…Ù†ØªÙ‡ÙŠØ©';
          case 'upcoming': return 'Ù‚Ø±ÙŠØ¨Ø§Ù‹';
          case 'cancelled': return 'Ù…Ù„ØºÙŠØ©';
          default: return 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯';
        }
      }

      function formatDate(dateString) {
        const date = new Date(dateString);
        return date.toLocaleDateString('ar-SA', {
          year: 'numeric',
          month: 'short',
          day: 'numeric'
        });
      }

      // Global functions for tournament actions
      window.viewTournament = function(tournamentId) {
        window.location.href = `/ar/tournaments/${tournamentId}`;
      };

      window.joinTournament = async function(tournamentId) {
        const token = localStorage.getItem('zh_love_token');
        if (!token) {
          window.location.href = '/ar/login';
          return;
        }
        alert('ØªÙ… Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ù„Ù„Ø¨Ø·ÙˆÙ„Ø© Ø¨Ù†Ø¬Ø§Ø­!');
        loadTournaments(currentPage, currentFilter);
      };

      window.watchLive = function(tournamentId) {
        window.location.href = `/ar/tournaments/${tournamentId}/live`;
      };
    });
  </script>

  <style>
    /* Enhanced Animations */
    @keyframes fade-in-up {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes blob {
      0% { transform: translate(0px, 0px) scale(1); }
      33% { transform: translate(30px, -50px) scale(1.1); }
      66% { transform: translate(-20px, 20px) scale(0.9); }
      100% { transform: translate(0px, 0px) scale(1); }
    }

    .animate-fade-in-up {
      animation: fade-in-up 0.6s ease-out forwards;
      opacity: 0;
    }

    .animate-blob {
      animation: blob 7s infinite;
    }

    .animation-delay-2000 {
      animation-delay: 2s;
    }

    .animation-delay-4000 {
      animation-delay: 4s;
    }

    /* Enhanced Card Effects */
    .enhanced-tournament-card.featured {
      position: relative;
    }

    .enhanced-tournament-card:hover .text-gray-400 {
      color: rgb(156 163 175);
    }

    .category-card {
      background: linear-gradient(135deg, var(--tw-gradient-stops));
    }

    .category-card:hover {
      transform: translateY(-5px) scale(1.02);
    }

    /* Line clamp utilities */
    .line-clamp-2 {
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    /* Smooth scrolling */
    html {
      scroll-behavior: smooth;
    }

    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: hsl(var(--muted));
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb {
      background: hsl(var(--border));
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: hsl(var(--accent));
    }
  </style>
</BaseLayout> 
---
import BaseLayout from '../../../layouts/BaseLayout.astro';
import PostForm from '../../../components/forum/PostForm.tsx';
import { ArrowLeft, FileText, Users, HelpCircle } from 'lucide-react';

const title = "إنشاء منشور جديد - المنتدى - زد اتش لوف";
const description = "شارك خبراتك واستراتيجياتك مع مجتمع لاعبي الجنرالات زيرو آور";

// Mock categories data
const categories = [
  { 
    id: 1, 
    name: 'عام', 
    slug: 'general', 
    color: '#22c55e', 
    description: 'المواضيع العامة والنقاشات المفتوحة حول اللعبة' 
  },
  { 
    id: 2, 
    name: 'الاستراتيجيات', 
    slug: 'strategies', 
    color: '#3b82f6', 
    description: 'نصائح واستراتيجيات اللعب، التكتيكات المتقدمة' 
  },
  { 
    id: 3, 
    name: 'البطولات', 
    slug: 'tournaments', 
    color: '#f59e0b', 
    description: 'الإعلان عن البطولات ومناقشات المنافسات' 
  },
  { 
    id: 4, 
    name: 'التقنيات', 
    slug: 'tech', 
    color: '#ef4444', 
    description: 'مشاكل تقنية، إعدادات اللعبة، وحلول' 
  },
  { 
    id: 5, 
    name: 'العشائر', 
    slug: 'clans', 
    color: '#8b5cf6', 
    description: 'مناقشات العشائر، التجنيد، والتحالفات' 
  },
  { 
    id: 6, 
    name: 'الريبلايز', 
    slug: 'replays', 
    color: '#ec4899', 
    description: 'مشاركة وتحليل ملفات الريبلايز' 
  },
  { 
    id: 7, 
    name: 'المودز', 
    slug: 'mods', 
    color: '#06b6d4', 
    description: 'التعديلات والإضافات للعبة' 
  }
];

const postingGuidelines = [
  'اختر عنواناً واضحاً ومحدداً للموضوع',
  'استخدم الفئة المناسبة لموضوعك',
  'اكتب محتوى مفيد وذو قيمة للمجتمع',
  'تجنب المحتوى المسيء أو غير اللائق',
  'استخدم الوسوم لتسهيل العثور على موضوعك',
  'أرفق الصور أو الملفات إذا كانت ضرورية',
  'تفاعل مع التعليقات بشكل إيجابي'
];
---

<BaseLayout title={title} description={description}>
  <div class="container-custom py-8">
    <!-- Navigation -->
    <div class="mb-6">
      <nav class="flex items-center space-x-2 rtl:space-x-reverse text-sm text-muted-foreground">
        <a href="/ar" class="hover:text-foreground transition-colors">الرئيسية</a>
        <span>/</span>
        <a href="/ar/forum" class="hover:text-foreground transition-colors">المنتدى</a>
        <span>/</span>
        <span class="text-foreground">إنشاء منشور جديد</span>
      </nav>
    </div>

    <!-- Back Button -->
    <div class="mb-6">
      <a 
        href="/ar/forum" 
        class="inline-flex items-center space-x-2 rtl:space-x-reverse text-muted-foreground hover:text-foreground transition-colors"
      >
        <ArrowLeft size={20} class="rtl:rotate-180" />
        <span>العودة للمنتدى</span>
      </a>
    </div>

    <!-- Header -->
    <div class="mb-8">
      <h1 class="text-3xl font-bold text-foreground mb-2 flex items-center space-x-3 rtl:space-x-reverse">
        <FileText size={32} />
        <span>إنشاء منشور جديد</span>
      </h1>
      <p class="text-muted-foreground">شارك خبراتك ومعرفتك مع مجتمع لاعبي الجنرالات زيرو آور</p>
    </div>

    <div class="flex flex-col lg:flex-row gap-8">
      <!-- Main Content -->
      <div class="flex-1">
        <PostForm 
          categories={categories}
          onSubmit={async (postData) => {
            console.log('Post data:', postData);
            // Here you would typically send the data to your API
            alert('تم إنشاء المنشور بنجاح!');
          }}
          client:load
        />
      </div>

      <!-- Sidebar -->
      <div class="w-full lg:w-80 space-y-6">
        <!-- Posting Guidelines -->
        <div class="military-card p-6">
          <h3 class="text-lg font-semibold text-foreground mb-4 flex items-center space-x-2 rtl:space-x-reverse">
            <HelpCircle size={20} />
            <span>إرشادات النشر</span>
          </h3>
          <ul class="space-y-2 text-sm">
            {postingGuidelines.map((guideline, index) => (
              <li class="flex items-start space-x-2 rtl:space-x-reverse">
                <span class="w-5 h-5 rounded-full bg-primary/20 text-primary text-xs flex items-center justify-center flex-shrink-0 mt-0.5">
                  {index + 1}
                </span>
                <span class="text-muted-foreground">{guideline}</span>
              </li>
            ))}
          </ul>
        </div>

        <!-- Categories Preview -->
        <div class="military-card p-6">
          <h3 class="text-lg font-semibold text-foreground mb-4">الفئات المتاحة</h3>
          <div class="space-y-3">
            {categories.map(category => (
              <div class="flex items-start space-x-3 rtl:space-x-reverse p-2 rounded-lg hover:bg-accent/50 transition-colors">
                <div 
                  class="w-3 h-3 rounded-full mt-1 flex-shrink-0"
                  style={`background-color: ${category.color}`}
                ></div>
                <div class="flex-1 min-w-0">
                  <div class="font-medium text-foreground text-sm">
                    {category.name}
                  </div>
                  <div class="text-xs text-muted-foreground">
                    {category.description}
                  </div>
                </div>
              </div>
            ))}
          </div>
        </div>

        <!-- Community Stats -->
        <div class="military-card p-6">
          <h3 class="text-lg font-semibold text-foreground mb-4 flex items-center space-x-2 rtl:space-x-reverse">
            <Users size={20} />
            <span>إحصائيات المجتمع</span>
          </h3>
          <div class="space-y-3">
            <div class="flex items-center justify-between">
              <span class="text-muted-foreground">إجمالي المنشورات</span>
              <span class="font-semibold text-tactical-green">856</span>
            </div>
            <div class="flex items-center justify-between">
              <span class="text-muted-foreground">الأعضاء النشطون</span>
              <span class="font-semibold text-victory-gold">1,420</span>
            </div>
            <div class="flex items-center justify-between">
              <span class="text-muted-foreground">منشورات اليوم</span>
              <span class="font-semibold text-command-blue">23</span>
            </div>
            <div class="flex items-center justify-between">
              <span class="text-muted-foreground">متصل الآن</span>
              <span class="font-semibold text-tactical-green">67</span>
            </div>
          </div>
        </div>

        <!-- Markdown Guide -->
        <div class="military-card p-6">
          <h3 class="text-lg font-semibold text-foreground mb-4">دليل التنسيق (Markdown)</h3>
          <div class="space-y-3 text-sm">
            <div class="space-y-1">
              <div class="text-muted-foreground">النص العريض:</div>
              <code class="bg-muted px-2 py-1 rounded text-xs">**نص عريض**</code>
            </div>
            <div class="space-y-1">
              <div class="text-muted-foreground">النص المائل:</div>
              <code class="bg-muted px-2 py-1 rounded text-xs">*نص مائل*</code>
            </div>
            <div class="space-y-1">
              <div class="text-muted-foreground">رابط:</div>
              <code class="bg-muted px-2 py-1 rounded text-xs">[نص الرابط](URL)</code>
            </div>
            <div class="space-y-1">
              <div class="text-muted-foreground">صورة:</div>
              <code class="bg-muted px-2 py-1 rounded text-xs">![وصف](رابط الصورة)</code>
            </div>
            <div class="space-y-1">
              <div class="text-muted-foreground">كود:</div>
              <code class="bg-muted px-2 py-1 rounded text-xs">`كود`</code>
            </div>
            <div class="space-y-1">
              <div class="text-muted-foreground">اقتباس:</div>
              <code class="bg-muted px-2 py-1 rounded text-xs">> اقتباس</code>
            </div>
            <div class="space-y-1">
              <div class="text-muted-foreground">قائمة:</div>
              <code class="bg-muted px-2 py-1 rounded text-xs">- عنصر</code>
            </div>
          </div>
        </div>

        <!-- Popular Tags -->
        <div class="military-card p-6">
          <h3 class="text-lg font-semibold text-foreground mb-4">الوسوم الشائعة</h3>
          <div class="flex flex-wrap gap-2">
            {['استراتيجية', 'نصائح', 'الصين', 'أمريكا', 'GLA', 'تكتيك', 'دفاع', 'هجوم', 'اقتصاد', 'بناء'].map(tag => (
              <span class="px-2 py-1 bg-muted text-muted-foreground rounded-full text-xs cursor-pointer hover:bg-accent transition-colors">
                #{tag}
              </span>
            ))}
          </div>
          <p class="text-xs text-muted-foreground mt-2">
            انقر على أي وسم لإضافته إلى منشورك
          </p>
        </div>

        <!-- Recent Activity -->
        <div class="military-card p-6">
          <h3 class="text-lg font-semibold text-foreground mb-4">النشاط الأخير</h3>
          <div class="space-y-3">
            <div class="flex items-center space-x-3 rtl:space-x-reverse">
              <img 
                src="/avatars/user1.png" 
                alt="user" 
                class="w-8 h-8 rounded-full object-cover"
              />
              <div class="flex-1 min-w-0">
                <p class="text-sm text-foreground truncate">
                  <span class="font-medium">الجنرال_المحترف</span> نشر موضوع جديد
                </p>
                <p class="text-xs text-muted-foreground">منذ 5 دقائق</p>
              </div>
            </div>
            
            <div class="flex items-center space-x-3 rtl:space-x-reverse">
              <img 
                src="/avatars/user2.png" 
                alt="user" 
                class="w-8 h-8 rounded-full object-cover"
              />
              <div class="flex-1 min-w-0">
                <p class="text-sm text-foreground truncate">
                  <span class="font-medium">لاعب_مبتدئ</span> علق على موضوع
                </p>
                <p class="text-xs text-muted-foreground">منذ 12 دقيقة</p>
              </div>
            </div>
            
            <div class="flex items-center space-x-3 rtl:space-x-reverse">
              <img 
                src="/avatars/user3.png" 
                alt="user" 
                class="w-8 h-8 rounded-full object-cover"
              />
              <div class="flex-1 min-w-0">
                <p class="text-sm text-foreground truncate">
                  <span class="font-medium">محب_المنافسة</span> أعجب بمنشور
                </p>
                <p class="text-xs text-muted-foreground">منذ 18 دقيقة</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</BaseLayout>

<style>
  code {
    font-family: 'SFMono-Regular', 'Menlo', 'Monaco', 'Consolas', 'Liberation Mono', 'Courier New', monospace;
  }
</style> 
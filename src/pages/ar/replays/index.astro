---
import BaseLayout from '../../../layouts/BaseLayout.astro';
import ReplayCard from '../../../components/replays/ReplayCard.tsx';
import { Play, Plus, Search, Filter, Star, Trophy, Eye, Clock, Upload } from 'lucide-react';

const title = "Ø§Ù„Ø±ÙŠØ¨Ù„Ø§ÙŠØ² - Ø²Ø¯ Ø§ØªØ´ Ù„ÙˆÙ";
const description = "ØªØµÙØ­ ÙˆØ´Ø§Ù‡Ø¯ Ø£ÙØ¶Ù„ Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ø§Ù„Ø¬Ù†Ø±Ø§Ù„Ø§Øª Ø²ÙŠØ±Ùˆ Ø¢ÙˆØ± Ù…Ù† Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† Ø§Ù„Ù…Ø­ØªØ±ÙÙŠÙ†";

// Mock replays data
const featuredReplays = [
  {
    id: 1,
    title: "Ù†Ù‡Ø§Ø¦ÙŠ Ø§Ù„Ø¨Ø·ÙˆÙ„Ø© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© 2024 - Ù…Ù„Ø­Ù…Ø© Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ©",
    description: "Ù…Ø¨Ø§Ø±Ø§Ø© Ù†Ù‡Ø§Ø¦ÙŠØ© Ù…Ø°Ù‡Ù„Ø© Ø¨ÙŠÙ† Ø£ÙØ¶Ù„ Ù„Ø§Ø¹Ø¨ÙŠÙ† ÙÙŠ Ø§Ù„Ø´Ø±Ù‚ Ø§Ù„Ø£ÙˆØ³Ø· Ù…Ø¹ ØªÙƒØªÙŠÙƒØ§Øª Ù…ØªÙ‚Ø¯Ù…Ø© ÙˆÙ…Ù†Ø§ÙˆØ±Ø§Øª Ø±Ø§Ø¦Ø¹Ø©",
    uploadedAt: '2024-01-15T20:30:00Z',
    uploadedBy: {
      id: 1,
      username: 'Ø³Ù„Ø·Ø§Ù†_Ø§Ù„Ø­Ø±Ø¨',
      avatar: '/avatars/sultan.png',
      verified: true
    },
    gameInfo: {
      map: 'Tournament Desert',
      mode: 'tournament',
      duration: 2450, // 40 minutes 50 seconds
      players: [
        {
          id: 1,
          username: 'Ø³Ù„Ø·Ø§Ù†_Ø§Ù„Ø­Ø±Ø¨',
          faction: 'USA',
          result: 'win',
          score: 15420,
          isAI: false
        },
        {
          id: 2,
          username: 'Ø£Ø³Ø¯_Ø§Ù„ØµØ­Ø±Ø§Ø¡',
          faction: 'China',
          result: 'lose',
          score: 14780,
          isAI: false
        }
      ],
      winner: {
        id: 1,
        username: 'Ø³Ù„Ø·Ø§Ù†_Ø§Ù„Ø­Ø±Ø¨'
      }
    },
    stats: {
      views: 25680,
      downloads: 1240,
      rating: 4.8,
      totalRatings: 456,
      featured: true
    },
    tags: ['tournament', 'final', 'pro', 'strategy'],
    category: 'tournament',
    quality: 'HD',
    fileSize: 89.5,
    version: '1.04',
    language: 'ar',
    thumbnail: '/thumbnails/replay1.jpg',
    isApproved: true,
    isFeatured: true,
    hasComments: true,
    commentCount: 89
  },
  {
    id: 2,
    title: "ØªÙƒØªÙŠÙƒØ§Øª GLA Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© - Ø¯Ø±Ø³ ÙÙŠ Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ©",
    description: "ØªØ¹Ù„Ù… ÙƒÙŠÙÙŠØ© Ø§Ø³ØªØ®Ø¯Ø§Ù… ØªÙƒØªÙŠÙƒØ§Øª GLA Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© Ù„Ù„ÙÙˆØ² Ø¶Ø¯ Ø§Ù„Ø®ØµÙˆÙ… Ø§Ù„Ø£Ù‚ÙˆÙŠØ§Ø¡",
    uploadedAt: '2024-01-14T16:15:00Z',
    uploadedBy: {
      id: 2,
      username: 'Ù…Ø­Ø§Ø±Ø¨_Ø§Ù„Ø¸Ù„Ø§Ù…',
      avatar: '/avatars/warrior.png',
      verified: true
    },
    gameInfo: {
      map: 'Urban Warfare',
      mode: 'multiplayer',
      duration: 1890, // 31 minutes 30 seconds
      players: [
        {
          id: 2,
          username: 'Ù…Ø­Ø§Ø±Ø¨_Ø§Ù„Ø¸Ù„Ø§Ù…',
          faction: 'GLA',
          result: 'win',
          score: 12560,
          isAI: false
        },
        {
          id: 3,
          username: 'DragonFlame',
          faction: 'China',
          result: 'lose',
          score: 11240,
          isAI: false
        }
      ]
    },
    stats: {
      views: 18920,
      downloads: 892,
      rating: 4.6,
      totalRatings: 234,
      featured: false
    },
    tags: ['gla', 'strategy', 'tutorial', 'advanced'],
    category: 'training',
    quality: 'HD',
    fileSize: 67.2,
    version: '1.04',
    language: 'ar',
    thumbnail: '/thumbnails/replay2.jpg',
    isApproved: true,
    isFeatured: false,
    hasComments: true,
    commentCount: 45
  }
];

const allReplays = [
  ...featuredReplays,
  {
    id: 3,
    title: "Ù…Ø¹Ø±ÙƒØ© Ø§Ù„Ø¯Ø¨Ø§Ø¨Ø§Øª Ø§Ù„Ù…Ù„Ø­Ù…ÙŠØ© - USA vs China",
    description: "Ù…Ø¹Ø±ÙƒØ© Ø¯Ø¨Ø§Ø¨Ø§Øª Ø¶Ø®Ù…Ø© Ù…Ø¹ ØªØ´ÙƒÙŠÙ„Ø§Øª Ø¹Ø³ÙƒØ±ÙŠØ© Ù…ØªÙ‚Ø¯Ù…Ø©",
    uploadedAt: '2024-01-13T14:20:00Z',
    uploadedBy: {
      id: 3,
      username: 'Ù‚Ø§Ø¦Ø¯_Ø§Ù„Ù…Ø¹Ø±ÙƒØ©',
      avatar: '/avatars/commander.png',
      verified: false
    },
    gameInfo: {
      map: 'Desert Fury',
      mode: 'skirmish',
      duration: 2150,
      players: [
        {
          id: 3,
          username: 'Ù‚Ø§Ø¦Ø¯_Ø§Ù„Ù…Ø¹Ø±ÙƒØ©',
          faction: 'USA',
          result: 'win',
          score: 18950,
          isAI: false
        },
        {
          id: 4,
          username: 'AI_Hard',
          faction: 'China',
          result: 'lose',
          score: 16780,
          isAI: true
        }
      ]
    },
    stats: {
      views: 12450,
      downloads: 580,
      rating: 4.3,
      totalRatings: 145,
      featured: false
    },
    tags: ['tanks', 'epic', 'usa', 'china'],
    category: 'showcase',
    quality: 'Standard',
    fileSize: 52.1,
    version: '1.04',
    language: 'ar',
    thumbnail: '/thumbnails/replay3.jpg',
    isApproved: true,
    isFeatured: false,
    hasComments: true,
    commentCount: 23
  }
];

const replayStats = {
  totalReplays: 1248,
  featuredReplays: 24,
  newToday: 12,
  totalViews: 2580000,
  averageRating: 4.2
};
---

<BaseLayout title={title} description={description}>
  <div class="container-custom py-8">
    <!-- Header -->
    <div class="flex items-center justify-between mb-8">
      <div>
        <h1 class="text-3xl font-bold text-foreground mb-2 flex items-center space-x-3 rtl:space-x-reverse">
          <Play size={32} class="text-tactical-green" />
          <span>Ø§Ù„Ø±ÙŠØ¨Ù„Ø§ÙŠØ²</span>
        </h1>
        <p class="text-muted-foreground">ØªØµÙØ­ ÙˆØ´Ø§Ù‡Ø¯ Ø£ÙØ¶Ù„ Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ø§Ù„Ø¬Ù†Ø±Ø§Ù„Ø§Øª Ø²ÙŠØ±Ùˆ Ø¢ÙˆØ±</p>
      </div>
      <a href="/ar/replays/upload" class="btn btn-primary flex items-center space-x-2 rtl:space-x-reverse">
        <Upload size={20} />
        <span>Ø±ÙØ¹ Ø±ÙŠØ¨Ù„Ø§ÙŠ</span>
      </a>
    </div>

    <!-- Statistics -->
    <div class="grid grid-cols-2 md:grid-cols-5 gap-4 mb-8">
      <div class="military-card p-4 text-center">
        <div class="text-2xl font-bold text-tactical-green mb-1">{replayStats.totalReplays}</div>
        <div class="text-sm text-muted-foreground">Ø±ÙŠØ¨Ù„Ø§ÙŠ</div>
      </div>
      <div class="military-card p-4 text-center">
        <div class="text-2xl font-bold text-victory-gold mb-1">{replayStats.featuredReplays}</div>
        <div class="text-sm text-muted-foreground">Ù…Ù…ÙŠØ²</div>
      </div>
      <div class="military-card p-4 text-center">
        <div class="text-2xl font-bold text-command-blue mb-1">{replayStats.newToday}</div>
        <div class="text-sm text-muted-foreground">Ø¬Ø¯ÙŠØ¯ Ø§Ù„ÙŠÙˆÙ…</div>
      </div>
      <div class="military-card p-4 text-center">
        <div class="text-2xl font-bold text-neutral-silver mb-1">{(replayStats.totalViews / 1000000).toFixed(1)}M</div>
        <div class="text-sm text-muted-foreground">Ù…Ø´Ø§Ù‡Ø¯Ø©</div>
      </div>
      <div class="military-card p-4 text-center">
        <div class="text-2xl font-bold text-orange-500 mb-1">{replayStats.averageRating}</div>
        <div class="text-sm text-muted-foreground">Ù…ØªÙˆØ³Ø· Ø§Ù„ØªÙ‚ÙŠÙŠÙ…</div>
      </div>
    </div>

    <!-- Search and Filter -->
    <div class="military-card p-4 mb-8">
      <div class="flex flex-col lg:flex-row gap-4">
        <div class="flex-1 relative">
          <Search class="absolute left-3 rtl:right-3 rtl:left-auto top-1/2 transform -translate-y-1/2 text-muted-foreground" size={20} />
          <input
            type="text"
            placeholder="Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø±ÙŠØ¨Ù„Ø§ÙŠØ²..."
            class="w-full pl-10 rtl:pr-10 rtl:pl-3 pr-3 py-2 bg-input border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-ring"
          />
        </div>
        
        <div class="flex flex-wrap items-center gap-2">
          <div class="flex items-center space-x-2 rtl:space-x-reverse">
            <Filter size={20} class="text-muted-foreground" />
            <select class="bg-input border border-border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-ring">
              <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙØ¦Ø§Øª</option>
              <option value="tournament">Ø¨Ø·ÙˆÙ„Ø©</option>
              <option value="training">ØªØ¯Ø±ÙŠØ¨</option>
              <option value="showcase">Ø¹Ø±Ø¶</option>
              <option value="funny">Ù…Ø¶Ø­Ùƒ</option>
              <option value="epic">Ù…Ù„Ø­Ù…ÙŠ</option>
            </select>
          </div>
          
          <select class="bg-input border border-border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-ring">
            <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙØµØ§Ø¦Ù„</option>
            <option value="usa">USA</option>
            <option value="china">China</option>
            <option value="gla">GLA</option>
          </select>
          
          <select class="bg-input border border-border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-ring">
            <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£ÙˆÙ‚Ø§Øª</option>
            <option value="today">Ø§Ù„ÙŠÙˆÙ…</option>
            <option value="week">Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹</option>
            <option value="month">Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±</option>
            <option value="year">Ù‡Ø°Ø§ Ø§Ù„Ø¹Ø§Ù…</option>
          </select>
          
          <select class="bg-input border border-border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-ring">
            <option value="newest">Ø§Ù„Ø£Ø­Ø¯Ø«</option>
            <option value="popular">Ø§Ù„Ø£ÙƒØ«Ø± Ø´Ø¹Ø¨ÙŠØ©</option>
            <option value="rating">Ø§Ù„Ø£Ø¹Ù„Ù‰ ØªÙ‚ÙŠÙŠÙ…Ø§Ù‹</option>
            <option value="views">Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø´Ø§Ù‡Ø¯Ø©</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Featured Replays -->
    <section class="mb-12">
      <h2 class="text-2xl font-bold text-foreground mb-6 flex items-center space-x-2 rtl:space-x-reverse">
        <Trophy size={24} class="text-victory-gold" />
        <span>Ø§Ù„Ø±ÙŠØ¨Ù„Ø§ÙŠØ² Ø§Ù„Ù…Ù…ÙŠØ²Ø©</span>
      </h2>
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        {featuredReplays.map(replay => (
          <ReplayCard 
            replay={replay}
            onPlay={(id) => window.location.href = `/ar/replays/${id}`}
            onDownload={(id) => console.log('Download replay:', id)}
            onRate={(id, rating) => console.log('Rate replay:', id, rating)}
            onFlag={(id) => console.log('Flag replay:', id)}
            currentUserId={1}
            isCompact={false}
            showActions={true}
            client:load
          />
        ))}
      </div>
    </section>

    <!-- Categories -->
    <section class="mb-12">
      <h2 class="text-2xl font-bold text-foreground mb-6">ØªØµÙØ­ Ø­Ø³Ø¨ Ø§Ù„ÙØ¦Ø©</h2>
      <div class="grid grid-cols-2 md:grid-cols-5 gap-4">
        <a href="/ar/replays?category=tournament" class="military-card p-4 text-center hover:shadow-lg transition-shadow">
          <div class="text-3xl mb-2">ğŸ†</div>
          <div class="font-medium text-foreground">Ø¨Ø·ÙˆÙ„Ø§Øª</div>
          <div class="text-sm text-muted-foreground">156 Ø±ÙŠØ¨Ù„Ø§ÙŠ</div>
        </a>
        <a href="/ar/replays?category=training" class="military-card p-4 text-center hover:shadow-lg transition-shadow">
          <div class="text-3xl mb-2">ğŸ¯</div>
          <div class="font-medium text-foreground">ØªØ¯Ø±ÙŠØ¨</div>
          <div class="text-sm text-muted-foreground">342 Ø±ÙŠØ¨Ù„Ø§ÙŠ</div>
        </a>
        <a href="/ar/replays?category=showcase" class="military-card p-4 text-center hover:shadow-lg transition-shadow">
          <div class="text-3xl mb-2">â­</div>
          <div class="font-medium text-foreground">Ø¹Ø±Ø¶</div>
          <div class="text-sm text-muted-foreground">689 Ø±ÙŠØ¨Ù„Ø§ÙŠ</div>
        </a>
        <a href="/ar/replays?category=funny" class="military-card p-4 text-center hover:shadow-lg transition-shadow">
          <div class="text-3xl mb-2">ğŸ˜„</div>
          <div class="font-medium text-foreground">Ù…Ø¶Ø­Ùƒ</div>
          <div class="text-sm text-muted-foreground">98 Ø±ÙŠØ¨Ù„Ø§ÙŠ</div>
        </a>
        <a href="/ar/replays?category=epic" class="military-card p-4 text-center hover:shadow-lg transition-shadow">
          <div class="text-3xl mb-2">ğŸ”¥</div>
          <div class="font-medium text-foreground">Ù…Ù„Ø­Ù…ÙŠ</div>
          <div class="text-sm text-muted-foreground">124 Ø±ÙŠØ¨Ù„Ø§ÙŠ</div>
        </a>
      </div>
    </section>

    <!-- Latest Replays -->
    <section class="mb-12">
      <h2 class="text-2xl font-bold text-foreground mb-6 flex items-center space-x-2 rtl:space-x-reverse">
        <Clock size={24} class="text-command-blue" />
        <span>Ø£Ø­Ø¯Ø« Ø§Ù„Ø±ÙŠØ¨Ù„Ø§ÙŠØ²</span>
      </h2>
      <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
        {allReplays.map(replay => (
          <ReplayCard 
            replay={replay}
            onPlay={(id) => window.location.href = `/ar/replays/${id}`}
            onDownload={(id) => console.log('Download replay:', id)}
            onRate={(id, rating) => console.log('Rate replay:', id, rating)}
            onFlag={(id) => console.log('Flag replay:', id)}
            currentUserId={1}
            isCompact={true}
            showActions={true}
            client:load
          />
        ))}
      </div>
    </section>

    <!-- Tips Section -->
    <section class="military-card p-6">
      <h2 class="text-xl font-bold text-foreground mb-4">Ù†ØµØ§Ø¦Ø­ Ù„Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ø±ÙŠØ¨Ù„Ø§ÙŠØ²</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="space-y-4">
          <div class="flex items-start space-x-3 rtl:space-x-reverse">
            <div class="w-8 h-8 bg-tactical-green/20 text-tactical-green rounded-full flex items-center justify-center flex-shrink-0">
              <span class="text-sm font-bold">1</span>
            </div>
            <div>
              <h3 class="font-semibold text-foreground mb-1">ØªØ¹Ù„Ù… Ù…Ù† Ø§Ù„Ù…Ø­ØªØ±ÙÙŠÙ†</h3>
              <p class="text-sm text-muted-foreground">Ø´Ø§Ù‡Ø¯ ÙƒÙŠÙ ÙŠÙ„Ø¹Ø¨ Ø£ÙØ¶Ù„ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† ÙˆØªØ¹Ù„Ù… Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§ØªÙ‡Ù…</p>
            </div>
          </div>
          <div class="flex items-start space-x-3 rtl:space-x-reverse">
            <div class="w-8 h-8 bg-victory-gold/20 text-victory-gold rounded-full flex items-center justify-center flex-shrink-0">
              <span class="text-sm font-bold">2</span>
            </div>
            <div>
              <h3 class="font-semibold text-foreground mb-1">Ø§Ø¯Ø±Ø³ Ø§Ù„ØªÙƒØªÙŠÙƒØ§Øª</h3>
              <p class="text-sm text-muted-foreground">Ø§Ù†ØªØ¨Ù‡ Ù„Ù„ØªÙƒØªÙŠÙƒØ§Øª Ø§Ù„Ù…Ø®ØªÙ„ÙØ© ÙˆÙƒÙŠÙÙŠØ© ØªØ·Ø¨ÙŠÙ‚Ù‡Ø§</p>
            </div>
          </div>
        </div>
        <div class="space-y-4">
          <div class="flex items-start space-x-3 rtl:space-x-reverse">
            <div class="w-8 h-8 bg-command-blue/20 text-command-blue rounded-full flex items-center justify-center flex-shrink-0">
              <span class="text-sm font-bold">3</span>
            </div>
            <div>
              <h3 class="font-semibold text-foreground mb-1">Ø´Ø§Ø±Ùƒ ØªØ¬Ø±Ø¨ØªÙƒ</h3>
              <p class="text-sm text-muted-foreground">Ù‚ÙŠÙ‘Ù… Ø§Ù„Ø±ÙŠØ¨Ù„Ø§ÙŠØ² ÙˆØ§ÙƒØªØ¨ ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ù…ÙÙŠØ¯Ø©</p>
            </div>
          </div>
          <div class="flex items-start space-x-3 rtl:space-x-reverse">
            <div class="w-8 h-8 bg-neutral-silver/20 text-neutral-silver rounded-full flex items-center justify-center flex-shrink-0">
              <span class="text-sm font-bold">4</span>
            </div>
            <div>
              <h3 class="font-semibold text-foreground mb-1">Ø§Ø­ÙØ¸ Ø§Ù„Ù…ÙØ¶Ù„Ø©</h3>
              <p class="text-sm text-muted-foreground">Ø­Ù…Ù‘Ù„ Ø§Ù„Ø±ÙŠØ¨Ù„Ø§ÙŠØ² Ø§Ù„Ù…ÙÙŠØ¯Ø© Ù„Ù…Ø±Ø§Ø¬Ø¹ØªÙ‡Ø§ Ù„Ø§Ø­Ù‚Ø§Ù‹</p>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
</BaseLayout> 